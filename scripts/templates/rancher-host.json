{
  "ignition": {
    "version": "2.1.0"
  },
  "storage": {
    "files": [{
      "filesystem": "root",
      "path": "/etc/hostname",
      "mode": 420,
      "contents": {
        "source": "data:,$VM_NAME.$VM_DOMAIN"
      }
    }]
  },
  "passwd": {
    "users": [{
      "name": "core",
      "sshAuthorizedKeys": [
        "$ESXI_DEPLOY_SSH"
      ]
    }]
  },
  "systemd": {
    "units": [{
      "contents": "[Unit]\nDescription=Rancher\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStartPre=/usr/bin/docker pull rancher/server:stable\nExecStart=/usr/bin/docker run --name rancher --hostname rancher --rm -p 80:8080 rancher/server:stable --db-host dc02.in.nativecode.com --db-pass 0b0ZFt5MdUo8HWuK13Cy\nExecStop=/usr/bin/docker stop rancher\nExecStopPost=/usr/bin/docker rm rancher\nTimeoutSec=600\n\n[Install]\nWantedBy=multi-user.target",
      "enable": true,
      "name": "rancher.service"
    }]
  }
}